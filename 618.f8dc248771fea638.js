"use strict";(self.webpackChunkbebpo_webmail_ui=self.webpackChunkbebpo_webmail_ui||[]).push([[618],{618:(mt,L,l)=>{l.r(L),l.d(L,{MessageModule:()=>m});var d=l(6895),P=l(4466),z=l(5378),w=l(2731),t=l(4650);class f{}f.\u0275fac=function(e){return new(e||f)},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-placeholder"]],decls:0,vars:0,template:function(e,n){},changeDetection:0});var c="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0;function U(o,e,n){var s=new XMLHttpRequest;s.open("GET",o),s.responseType="blob",s.onload=function(){_(s.response,e,n)},s.onerror=function(){console.error("could not download file")},s.send()}function k(o){var e=new XMLHttpRequest;e.open("HEAD",o,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function T(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(e)}}var E=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),_=c.saveAs||("object"!=typeof window||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!E?function(e,n,s){var a=c.URL||c.webkitURL,i=document.createElement("a");i.download=n=n||e.name||"download",i.rel="noopener","string"==typeof e?(i.href=e,i.origin!==location.origin?k(i.href)?U(e,n,s):T(i,i.target="_blank"):T(i)):(i.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(i.href)},4e4),setTimeout(function(){T(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,s){if(n=n||e.name||"download","string"==typeof e)if(k(e))U(e,n,s);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){T(a)})}else navigator.msSaveOrOpenBlob(function $(o,e){return typeof e>"u"?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob([String.fromCharCode(65279),o],{type:o.type}):o}(e,s),n)}:function(e,n,s,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return U(e,n,s);var i="application/octet-stream"===e.type,r=/constructor/i.test(c.HTMLElement)||c.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||i&&r||E)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var M=b.result;M=g?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=M:location=M,a=null},b.readAsDataURL(e)}else{var C=c.URL||c.webkitURL,O=C.createObjectURL(e);a?a.location=O:location.href=O,a=null,setTimeout(function(){C.revokeObjectURL(O)},4e4)}});c.saveAs=_.saveAs=_;var H=l(7579),q=l(8505),I=l(262),S=l(515),B=l(3900),Y=l(4128),D=l(3202),N=l(9936),j=l(7512),J=l(4556),y=l(8940),h=l(4463);class v{constructor(e){this.bsModalRef=e}close(){this.bsModalRef.hide()}getTitle(e){return`${e.title} ${e.gender} ${e.givenName} ${e.surname}`}getStreetAndNumber(e){return`${e.street} ${e.houseNumber}`}getPostalCodeAndCity(e){return`${e.postalCode} ${e.city}`}getFederalStateAndC(e){return`${e.city}, ${e.country}`}}v.\u0275fac=function(e){return new(e||v)(t.Y36(y.UZ))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-account-info"]],decls:102,vars:49,consts:[["role","dialog"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"modal-button-dark","pull-right",3,"click"],["aria-hidden","true"],[1,"fa-solid","fa-xmark","fa-xl","text-light"],[1,"modal-body","col-md-10","offset-1"],[1,"row","mb-4"],[1,"col-md-2"],[1,"fa-solid","fa-user","fa-3x","user-icon"],[1,"col-md-10","text-secondary"],[1,"row"],[1,"col-md-6"],[1,"col-md-6","text-secondary"],[1,"modal-footer"],["type","button",1,"gov-btn-primary-md",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.close()}),t.TgZ(6,"span",4),t._UZ(7,"i",5),t.qZA()()(),t.TgZ(8,"div",6)(9,"div",7)(10,"div",8),t._UZ(11,"i",9),t.qZA(),t.TgZ(12,"div",10)(13,"div")(14,"h4"),t._uU(15),t.qZA()(),t.TgZ(16,"div")(17,"span"),t._uU(18),t.qZA()()()(),t.TgZ(19,"div",11)(20,"div",12)(21,"h5"),t._uU(22),t.ALo(23,"translate"),t.qZA()(),t.TgZ(24,"div",13),t._uU(25),t.qZA()(),t.TgZ(26,"div",11)(27,"div",12)(28,"h5"),t._uU(29),t.ALo(30,"translate"),t.qZA()(),t.TgZ(31,"div",13),t._uU(32),t.qZA()(),t.TgZ(33,"div",11)(34,"div",12)(35,"h5"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div",13),t._uU(39),t.qZA()(),t.TgZ(40,"div",11)(41,"div",12)(42,"h5"),t._uU(43),t.ALo(44,"translate"),t.qZA()(),t.TgZ(45,"div",13),t._uU(46),t.qZA()(),t._UZ(47,"hr"),t.TgZ(48,"div",11)(49,"div",12)(50,"h5"),t._uU(51),t.ALo(52,"translate"),t.qZA()(),t.TgZ(53,"div",13),t._uU(54),t.qZA()(),t.TgZ(55,"div",11)(56,"div",12)(57,"h5"),t._uU(58),t.ALo(59,"translate"),t.qZA()(),t.TgZ(60,"div",13),t._uU(61),t.qZA()(),t.TgZ(62,"div",11)(63,"div",12)(64,"h5"),t._uU(65),t.ALo(66,"translate"),t.qZA()(),t.TgZ(67,"div",13),t._uU(68),t.qZA()(),t._UZ(69,"hr"),t.TgZ(70,"div",11)(71,"div",12)(72,"h5"),t._uU(73),t.ALo(74,"translate"),t.qZA()(),t.TgZ(75,"div",13),t._uU(76,"0305458"),t.qZA()(),t.TgZ(77,"div",11)(78,"div",12)(79,"h5"),t._uU(80),t.ALo(81,"translate"),t.qZA()(),t.TgZ(82,"div",13),t._uU(83,"0177456"),t.qZA()(),t.TgZ(84,"div",11)(85,"div",12)(86,"h5"),t._uU(87),t.ALo(88,"translate"),t.qZA()(),t.TgZ(89,"div",13),t._uU(90,"+44 551446"),t.qZA()(),t.TgZ(91,"div",11)(92,"div",12)(93,"h5"),t._uU(94),t.ALo(95,"translate"),t.qZA()(),t.TgZ(96,"div",13),t._uU(97),t.qZA()()(),t.TgZ(98,"div",14)(99,"button",15),t.NdJ("click",function(){return n.close()}),t._uU(100),t.ALo(101,"translate"),t.qZA()()()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,23,"title.accountInfo")),t.xp6(12),t.Oqu(n.getTitle(n.account)),t.xp6(3),t.Oqu(n.account.identifier),t.xp6(4),t.Oqu(t.lcZ(23,25,"label.organization")),t.xp6(3),t.Oqu(n.account.organization),t.xp6(4),t.Oqu(t.lcZ(30,27,"label.organizationalUnit")),t.xp6(3),t.Oqu(n.account.organizationalUnit),t.xp6(4),t.Oqu(t.lcZ(37,29,"label.role")),t.xp6(3),t.Oqu(n.account.egvpRoleID),t.xp6(4),t.Oqu(t.lcZ(44,31,"label.externalID")),t.xp6(3),t.Oqu(n.account.identifier),t.xp6(5),t.Oqu(t.lcZ(52,33,"label.streetAndNumber")),t.xp6(3),t.Oqu(n.getStreetAndNumber(n.account)),t.xp6(4),t.Oqu(t.lcZ(59,35,"label.postalCodeAndCity")),t.xp6(3),t.Oqu(n.getPostalCodeAndCity(n.account)),t.xp6(4),t.Oqu(t.lcZ(66,37,"label.federalStateAndC")),t.xp6(3),t.Oqu(n.getFederalStateAndC(n.account)),t.xp6(5),t.Oqu(t.lcZ(74,39,"label.phone")),t.xp6(7),t.Oqu(t.lcZ(81,41,"label.mobile")),t.xp6(7),t.Oqu(t.lcZ(88,43,"label.fax")),t.xp6(7),t.Oqu(t.lcZ(95,45,"label.mail")),t.xp6(3),t.Oqu(n.account.email),t.xp6(3),t.Oqu(t.lcZ(101,47,"button.close")))},dependencies:[h.X$],styles:[".user-icon[_ngcontent-%COMP%]{max-width:45px;max-height:51px}"],changeDetection:0});var F=l(1837),Q=l(6572),K=l(529);class u{constructor(e){this.httpClient=e,this.userid="buelent"}getAttachment(e,n){return this.httpClient.get(`${Q.r.ATTACHMENT_LOAD}/${e}/${n}`,{headers:{userid:this.userid},responseType:"arraybuffer"})}}u.\u0275fac=function(e){return new(e||u)(t.LFG(K.eN))},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});var G=l(2160),R=l(3787);function W(o,e){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"h4",3),t._uU(4),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.close())}),t._UZ(6,"span",5),t.qZA()(),t.TgZ(7,"div",6),t._UZ(8,"pdf-viewer",7),t.TgZ(9,"div",8)(10,"div",9)(11,"button",10),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.zoomFactor=a.zoomFactor-.1)}),t.ALo(12,"translate"),t._UZ(13,"span",11),t.qZA(),t.TgZ(14,"button",10),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.zoomFactor=a.zoomFactor+.1)}),t.ALo(15,"translate"),t._UZ(16,"span",12),t.qZA()()()(),t.TgZ(17,"div",13)(18,"div"),t._UZ(19,"span",14),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"div",15)(23,"button",16),t.NdJ("click",function(){const i=t.CHM(n).ngIf,r=t.oxw();return t.KtG(r.downloadAttachment(i))}),t._UZ(24,"span",17),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"button",18),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.close())}),t._uU(28),t.ALo(29,"translate"),t.qZA()()()(),t.BQk()}if(2&o){const n=t.oxw();t.xp6(4),t.Oqu(n.filename),t.xp6(4),t.Q6J("src",n.attachmentPdfViewer)("rotation",0)("original-size",!1)("show-all",!0)("fit-to-page",!1)("zoom",n.zoomFactor)("zoom-scale","page-height")("stick-to-page",!1)("render-text",!0)("external-link-target","blank")("autoresize",!0)("show-borders",!1),t.xp6(3),t.Q6J("tooltip",t.lcZ(12,22,"tooltip.pdfZoomOut"))("position",n.position.BELOW)("disabled",n.zoomFactor<=n.zoomMin),t.xp6(3),t.Q6J("tooltip",t.lcZ(15,24,"tooltip.pdfZoomIn"))("position",n.position.BELOW)("disabled",n.zoomFactor>=n.zoomMax),t.xp6(6),t.hij(" ",t.lcZ(21,26,"message.info.pdfViewer")," "),t.xp6(5),t.hij(" ",t.lcZ(26,28,"button.download")," "),t.xp6(3),t.hij(" ",t.lcZ(29,30,"button.close")," ")}}class Z{constructor(e,n){this.bsModalRef=e,this.attachmentService=n,this.position=J.D,this.zoomMax=2,this.zoomMin=.4,this.zoomFactor=1}ngOnInit(){this.initPdfViewer()}downloadAttachment(e){_(new Blob([e]),this.filename)}close(){this.bsModalRef.hide()}initPdfViewer(){this.attachmentDownload$=this.attachmentService.getAttachment(this.messageId,this.attachmentId).pipe((0,q.b)(e=>{this.attachmentPdfViewer=new Uint8Array(e)}),(0,I.K)(e=>(console.error("An error occurred while downloading the attachment",e),S.E)))}}Z.\u0275fac=function(e){return new(e||Z)(t.Y36(y.UZ),t.Y36(u))},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["app-pdf-modal"]],decls:2,vars:3,consts:[[4,"ngIf"],["role","dialog"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"modal-button-dark","pull-right",3,"click"],["aria-hidden","true",1,"fa-solid","fa-xmark","fa-xl"],[1,"modal-body"],[3,"src","rotation","original-size","show-all","fit-to-page","zoom","zoom-scale","stick-to-page","render-text","external-link-target","autoresize","show-borders"],[1,"pdf-viewer-navigation-container"],[1,"pdf-viewer-navigation"],["type","button",1,"pdf-viewer-navigation-button",3,"tooltip","position","disabled","click"],[1,"fa-solid","fa-minus","fa-xs","fa-fw"],[1,"fa-solid","fa-plus","fa-xs","fa-fw"],[1,"modal-footer","d-flex","justify-content-between"],["aria-hidden","true",1,"fa-solid","fa-circle-info","fa-xl","color-info"],[1,"btn-group-flex"],["type","button",1,"gov-btn-secondary-md",3,"click"],["aria-hidden","true",1,"fa-solid","fa-download"],["type","button",1,"gov-btn-primary-md",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,W,30,32,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.attachmentDownload$))},dependencies:[d.O5,G.rQ,R.i,d.Ov,h.X$],styles:["[_nghost-%COMP%]     .pdfViewer .page .canvasWrapper{border:1px solid var(--gray-300)}pdf-viewer[_ngcontent-%COMP%]{width:100%;height:70vh}.modal-body[_ngcontent-%COMP%]{background-color:var(--gray-200)}.pdf-viewer-navigation-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:10px}.pdf-viewer-navigation[_ngcontent-%COMP%]{display:inline-flex;padding:5px 10px;background-color:var(--gray-500);gap:10px}.pdf-viewer-navigation-button[_ngcontent-%COMP%]{padding:1px;border:1px solid var(--white);border-radius:4px;background-color:var(--gray-500);color:var(--white);line-height:1}"],changeDetection:0});var X=l(2629),V=l(6350);class A{constructor(e){this.bsModalRef=e}close(){this.bsModalRef.hide()}}A.\u0275fac=function(e){return new(e||A)(t.Y36(y.UZ))},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-message-history"]],decls:12,vars:6,consts:[["role","dialog"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"modal-button-dark","pull-right",3,"click"],["aria-hidden","true",1,"fa-solid","fa-xmark","fa-xl"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"gov-btn-primary-md",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.close()}),t._UZ(6,"span",4),t.qZA()(),t._UZ(7,"div",5),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return n.close()}),t._uU(10),t.ALo(11,"translate"),t.qZA()()()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"modal.title.messageHistory")),t.xp6(7),t.hij(" ",t.lcZ(11,4,"button.close")," "))},dependencies:[h.X$],encapsulation:2,changeDetection:0});var tt=l(292),et=l(6199),nt=l(3763),ot=l(8332);function at(o,e){1&o&&t.GkF(0)}function st(o,e){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",19),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",20),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"button",21),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().ngIf,i=t.oxw();return t.KtG(i.showDeleteModal(a))}),t.ALo(8,"translate"),t._UZ(9,"i",22),t.qZA(),t.BQk()}if(2&o){const n=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,4,"button.send")),t.xp6(3),t.Oqu(t.lcZ(6,6,"button.edit")),t.xp6(2),t.Q6J("tooltip",t.lcZ(8,8,"tooltip.deleteMsg"))("position",n.position.BELOW)}}function it(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"button",23),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",24),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().ngIf,i=t.oxw();return t.KtG(i.replyMessage(a))}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",21),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().ngIf,i=t.oxw();return t.KtG(i.shareMessage(a))}),t.ALo(7,"translate"),t._UZ(8,"i",25),t.qZA(),t.TgZ(9,"button",21),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().ngIf,i=t.oxw();return t.KtG(i.showDeleteModal(a))}),t.ALo(10,"translate"),t._UZ(11,"i",22),t.qZA(),t.TgZ(12,"button",26),t._UZ(13,"i",27),t.qZA(),t.TgZ(14,"ul",28)(15,"li")(16,"button",29),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().ngIf,i=t.oxw();return t.KtG(i.showArchiveModal(a))}),t._UZ(17,"span",30),t._uU(18),t.ALo(19,"translate"),t.qZA()(),t.TgZ(20,"li")(21,"button",29),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().ngIf,i=t.oxw();return t.KtG(i.showMessageHistoryModal(a))}),t._UZ(22,"span",31),t._uU(23),t.ALo(24,"translate"),t.qZA()()()}if(2&o){const n=t.oxw().ngIf,s=t.oxw();t.Q6J("ngClass",n.eebSent?"gov-btn-secondary-md":"gov-btn-primary-md"),t.xp6(1),t.hij(" ",t.lcZ(2,10,"button.sendEeb")," "),t.xp6(2),t.Q6J("ngClass",n.eebSent?"gov-btn-primary-md":"gov-btn-secondary-md"),t.xp6(1),t.hij(" ",t.lcZ(5,12,"button.reply")," "),t.xp6(2),t.Q6J("tooltip",t.lcZ(7,14,"tooltip.forwardMsg"))("position",s.position.BELOW),t.xp6(3),t.Q6J("tooltip",t.lcZ(10,16,"tooltip.deleteMsg"))("position",s.position.BELOW),t.xp6(9),t.hij(" ",t.lcZ(19,18,"button.archiving")," "),t.xp6(5),t.hij(" ",t.lcZ(24,20,"button.messageHistory")," ")}}function lt(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"div",32)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",33),t.NdJ("click",function(){const i=t.CHM(n).ngIf,r=t.oxw(2);return t.KtG(r.showInfoModal(i))}),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"span",34),t._uU(10),t.qZA()()}if(2&o){const n=t.oxw().ngIf;t.xp6(2),t.Oqu(t.lcZ(3,4,"label.from")),t.xp6(3),t.hij(" ",n.sender," "),t.xp6(2),t.Oqu(t.lcZ(8,6,"label.to")),t.xp6(3),t.Oqu(n.primaryReceiver)}}function rt(o,e){if(1&o&&(t.TgZ(0,"div",35)(1,"span",34),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"-"),t.qZA(),t.TgZ(11,"span",34),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"span"),t._uU(15),t.qZA(),t.TgZ(16,"span"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"span"),t._uU(20,"-"),t.qZA(),t.TgZ(21,"span"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"span"),t._uU(25,"-"),t.qZA(),t.TgZ(26,"span"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"span"),t._uU(30,"-"),t.qZA(),t.TgZ(31,"span"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"span"),t._uU(35,"-"),t.qZA(),t.TgZ(36,"span"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"span"),t._uU(40,"-"),t.qZA(),t.TgZ(41,"span"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"span"),t._uU(45),t.ALo(46,"translate"),t.ALo(47,"translate"),t.qZA()()),2&o){const n=t.oxw().ngIf;t.xp6(2),t.Oqu(t.lcZ(3,12,"label.sender")),t.xp6(3),t.Oqu(n.sender),t.xp6(2),t.Oqu(t.lcZ(8,14,"label.fileReference")),t.xp6(5),t.Oqu(t.lcZ(13,16,"label.receiver")),t.xp6(3),t.Oqu(n.primaryReceiver),t.xp6(2),t.Oqu(t.lcZ(18,18,"label.fileReference")),t.xp6(5),t.Oqu(t.lcZ(23,20,"label.subjectArea")),t.xp6(5),t.Oqu(t.lcZ(28,22,"label.kurzrubrum")),t.xp6(5),t.Oqu(t.lcZ(33,24,"label.subjectOfProceedings")),t.xp6(5),t.Oqu(t.lcZ(38,26,"label.sendPriority")),t.xp6(5),t.Oqu(t.lcZ(43,28,"label.eebRequired")),t.xp6(3),t.Oqu(n.eebSent?t.lcZ(46,30,"label.no"):t.lcZ(47,32,"label.yes"))}}function ct(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"li",38)(1,"div"),t._uU(2),t.qZA(),t.TgZ(3,"div",39)(4,"button",29),t.NdJ("click",function(){const i=t.CHM(n).$implicit,r=t.oxw(2).ngIf,g=t.oxw();return t.KtG(g.showPdfModal(i.filename,r.identifier,i.attachmentId))}),t._UZ(5,"span",40),t.qZA(),t.TgZ(6,"button",29),t.NdJ("click",function(){const i=t.CHM(n).$implicit,r=t.oxw(2).ngIf,g=t.oxw();return t.KtG(g.downloadAttachment(i.filename,r.identifier,i.attachmentId))}),t._UZ(7,"span",41),t.qZA()()()}if(2&o){const n=e.$implicit;t.xp6(2),t.Oqu(n.filename)}}function dt(o,e){if(1&o&&(t.TgZ(0,"ul",36),t.YNc(1,ct,8,1,"li",37),t.qZA()),2&o){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",n.attachments)}}const gt=function(o){return{attachments:o}};function ut(o,e){if(1&o){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t._UZ(2,"app-alert",2),t.ALo(3,"async"),t.qZA(),t.TgZ(4,"div",3)(5,"div",4)(6,"div",5),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"div",6)(10,"div",7),t.YNc(11,st,10,10,"ng-container",8),t.YNc(12,it,25,22,"ng-template",null,9,t.W1O),t.qZA()()(),t.TgZ(14,"div",4)(15,"div",10),t.YNc(16,lt,11,8,"div",11),t.ALo(17,"async"),t.qZA()(),t.TgZ(18,"div",4)(19,"div",10)(20,"h4",12),t._uU(21),t.qZA()()(),t.TgZ(22,"div",4)(23,"div",13)(24,"div")(25,"button",14),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.showMessage=!0)}),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"button",14),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.showMessage=!1)}),t._uU(29),t.ALo(30,"translate"),t.qZA()(),t.TgZ(31,"button",15),t._UZ(32,"span",16),t._uU(33),t.ALo(34,"translate"),t.qZA()()(),t.TgZ(35,"div",4)(36,"div",10),t.YNc(37,rt,48,34,"div",17),t.YNc(38,dt,2,1,"ng-template",null,18,t.W1O),t.qZA()()(),t.BQk()}if(2&o){const n=e.ngIf,s=t.MAs(13),a=t.MAs(39),i=t.oxw();t.xp6(2),t.Q6J("alert",t.lcZ(3,13,i.alertMessage$)),t.xp6(5),t.Oqu(t.xi3(8,15,n.transmittedAt,"medium")),t.xp6(4),t.Q6J("ngIf",n.folder===i.folderEnum.DRAFT)("ngIfElse",s),t.xp6(5),t.Q6J("ngIf",t.lcZ(17,18,i.senderAccount$)),t.xp6(5),t.Oqu(n.subject),t.xp6(4),t.Q6J("ngClass",i.showMessage?"btn-menu-flat-selected":""),t.xp6(1),t.hij(" ",t.lcZ(27,20,"button.message")," "),t.xp6(2),t.Q6J("ngClass",i.showMessage?"":"btn-menu-flat-selected "),t.xp6(1),t.hij(" ",t.xi3(30,22,"button.attachments",t.VKq(27,gt,n.attachments.length))," "),t.xp6(4),t.hij(" ",t.lcZ(34,25,"button.download")," "),t.xp6(4),t.Q6J("ngIf",i.showMessage)("ngIfElse",a)}}class x{constructor(e,n,s,a,i,r,g,b,C){this.messageStore=e,this.messageService=n,this.router=s,this.route=a,this.translate=i,this.cdRef=r,this.modalService=g,this.attachmentService=b,this.searchService=C,this.folderEnum=D.g,this.position=J.D,this.showMessage=!0,this.alertMessage$=new H.x}ngOnInit(){this.selectedEgvpMessage$=this.messageStore.getSelectedMessage().pipe((0,q.b)(e=>{this.showMessage=!0,this.selectedEgvpMessage=e,this.senderAccount$=this.searchService.getAccountById(e.identifier)}))}ngAfterViewInit(){this.showEebWarningIfRequired()}showDeleteModal(e){this.modalService.show(F.z,{class:"modal-lg",initialState:{title:this.translate.instant("modal.title.deleteMsg"),modalType:j.w.CONFIRM,confirmButtonName:this.translate.instant("button.ok"),declineButtonName:this.translate.instant("button.cancel"),content:this.translate.instant("modal.content.deleteMsg",{subject:e.subject}),callback:n=>{"confirm"===n&&this.deleteEgvpMessage(e)}}})}showArchiveModal(e){this.modalService.show(F.z,{class:"modal-lg",initialState:{title:this.translate.instant("modal.title.archiveMsg"),modalType:j.w.CONFIRM,confirmButtonName:this.translate.instant("button.ok"),declineButtonName:this.translate.instant("button.cancel"),content:this.translate.instant("modal.content.archiveMsg",{subject:e.subject}),callback:n=>{"confirm"===n&&this.archiveEgvpMessage(e)}}})}showMessageHistoryModal(e){this.modalService.show(A,{class:"modal-xl"})}showPdfModal(e,n,s){this.modalService.show(Z,{class:"modal-xl",initialState:{filename:e,messageId:n,attachmentId:s}})}showInfoModal(e){this.modalService.show(v,{class:"modal-lg modal-centered",backdrop:"static",initialState:{account:e}})}replyMessage(e){this.router.navigate(["menu/new-message"],{state:{message:e,type:N.C.REPLY,subject:`AW: [${e.subject}]`}})}shareMessage(e){this.router.navigate(["menu/new-message"],{state:{message:e,type:N.C.SHARE,subject:`WG: [${e.subject}]`}})}downloadAttachment(e,n,s){this.selectedAttachment$=this.attachmentService.getAttachment(n,s).pipe((0,q.b)(a=>{_(new Blob([a]),e)}),(0,I.K)(a=>(console.error("An error occurred while downloading the attachment",a),S.E)))}showEebWarningIfRequired(){this.selectedEgvpMessage.eebSent||(this.alertMessage$.next(X.b.customWarning(this.translate.instant("message.warn.eebRequired"),!1)),this.cdRef.detectChanges())}deleteEgvpMessage(e){this.updateEgvpMessages(this.messageService.deleteEgvpMessage(e.identifier),e,"An error occurred while deleting the egvp message")}archiveEgvpMessage(e){this.updateEgvpMessages(this.messageService.archiveMessage(e.identifier),e,"An error occurred while archiving the egvp message")}updateEgvpMessages(e,n,s){e.pipe((0,B.w)(()=>{const a=this.messageService.getAllEgvpMessages(n.folder,0),i=this.messageService.getUnreadEgvpMessages(n.folder,0);return(0,Y.D)({allEgvpMessages:a,allUnreadMessages:i})})).subscribe({next:a=>{this.messageStore.setAllEgvpMessages(a.allEgvpMessages),this.messageStore.setUnreadEgvpMessages(a.allUnreadMessages)},complete:()=>{this.messageStore.setSelectedEgvpMessage(new V.D),this.router.navigate(["placeholder"],{relativeTo:this.route})},error:a=>{console.error(s,a)}})}}x.\u0275fac=function(e){return new(e||x)(t.Y36(tt.D),t.Y36(et.e),t.Y36(w.F0),t.Y36(w.gz),t.Y36(h.sK),t.Y36(t.sBO),t.Y36(y.tT),t.Y36(u),t.Y36(nt.o))},x.\u0275cmp=t.Xpm({type:x,selectors:[["app-message"]],decls:4,vars:6,consts:[[4,"ngIf"],[1,"alert-container"],[3,"alert"],[1,"message-container"],[1,"row"],[1,"col-4"],[1,"col-8","text-end"],[1,"message-button-grid"],[4,"ngIf","ngIfElse"],["noDraftFolder",""],[1,"col"],["class","message-participants-grid",4,"ngIf"],[1,"message-header"],[1,"col","d-flex","justify-content-between"],["type","button",1,"btn-menu-flat",3,"ngClass","click"],["type","button",1,"btn-simple-flat"],["aria-hidden","true",1,"fa-solid","fa-download"],["class","message-content-grid",4,"ngIf","ngIfElse"],["showAttachments",""],["type","button",1,"gov-btn-primary-md"],["type","button",1,"gov-btn-secondary-md"],["type","button",1,"gov-btn-icon-primary",3,"tooltip","position","click"],[1,"fa-solid","fa-trash","fa-xl"],["type","button",3,"ngClass"],["type","button",3,"ngClass","click"],[1,"fa-solid","fa-share","fa-xl"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"gov-btn-icon-primary"],[1,"fa-solid","fa-ellipsis-vertical","fa-xl"],[1,"dropdown-menu"],["type","button",1,"btn-simple-flat",3,"click"],[1,"fa-solid","fa-box-archive"],[1,"fa-solid","fa-clock-rotate-left"],[1,"message-participants-grid"],["type","button",1,"btn-text-flat",3,"click"],[1,"fw-bold"],[1,"message-content-grid"],[1,"list-group","list-group-flush"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"btn-group-flex"],[1,"fa-solid","fa-eye"],[1,"fa-solid","fa-download"]],template:function(e,n){1&e&&(t.YNc(0,at,1,0,"ng-container",0),t.ALo(1,"async"),t.YNc(2,ut,40,29,"ng-container",0),t.ALo(3,"async")),2&e&&(t.Q6J("ngIf",t.lcZ(1,2,n.selectedAttachment$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,n.selectedEgvpMessage$)))},dependencies:[d.mk,d.sg,d.O5,ot.w,R.i,d.Ov,d.uU,h.X$],styles:[".alert-container[_ngcontent-%COMP%]{margin-top:8px}.message-container[_ngcontent-%COMP%]{margin-top:24px}.message-header[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:24px;font-weight:700}.message-button-grid[_ngcontent-%COMP%]{display:inline-grid;column-gap:10px;grid-template-columns:repeat(5,auto)}.message-participants-grid[_ngcontent-%COMP%]{display:inline-grid;column-gap:10px;grid-template-columns:repeat(2,auto)}.message-content-grid[_ngcontent-%COMP%]{display:inline-grid;margin-top:15px;column-gap:20px;grid-template-columns:repeat(2,auto);row-gap:5px}"],changeDetection:0});const pt=[{path:"",component:x},{path:"placeholder",component:f}];class p{}p.\u0275fac=function(e){return new(e||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[w.Bz.forChild(pt),w.Bz]});class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[d.ez,p,P.m,z.z]})}}]);